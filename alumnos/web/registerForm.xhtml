<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <h:form>
            <h2>Forma De Registro</h2>
            <p:messages id="msg" showDetail="true" autoUpdate="true" closable="true" />

            <h:panelGrid columns="3" cellpadding="5px" cellspacing="5px">

                <p:outputLabel value="Matricula/#Empleado" for="matInput" />
                <p:inputText  value="#{reg.pres.usuario}" id="matInput" size="15" validator="matVal" required="true">

                    <f:ajax event="keyup" render="checkMat"/>
                </p:inputText>
                <p:message for="matInput" id="checkMat" />
            </h:panelGrid>

            <h:panelGrid columns="2" cellpadding="5px" cellspacing="5px">

                <p:outputLabel value="Nombre" for="nameInput" />
                <p:inputText value="#{reg.pres.nombre}" id="nameInput" size="30" required="true"/>
                <p:outputLabel value="Apellido Paterno" for="apaternoInput" />
                <p:inputText value="#{reg.pres.apaterno}"  id="apaternoInput" size="30"  required="true"/>
                <p:outputLabel value="Apellido Materno" for="amaternoInput" />
                <p:inputText value="#{reg.pres.amaterno}" id="amaternoInput" size="30" required="true"/>
                <p:outputLabel value="Telefono" for="telInput" />
                <p:inputText value="#{reg.pres.tel}"  id="telInput" size="15" required="true"/>

                <p:outputLabel value="Email" for="emailInput" />
                <p:inputText value="#{reg.pres.email}" id="emailInput" size="40" required="true" validatorMessage="inserta correo valido">
                    <f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                </p:inputText>

                <p:outputLabel value="Carrera" for="carreraInput" />
                <p:inputText value="#{reg.pres.carrera}" id="carreraInput" size="20" required="true"/>

                <p:outputLabel value="Tipo Prestario" for="tipoPrestario" />
                <p:selectOneMenu  value="#{reg.selectedPrestario}" id="tipoPrestario" converter="stype" required="true">
                    <f:selectItem itemLabel="--.--" itemValue="#{null}" noSelectionOption="true" /> 
                    <f:selectItems value="#{reg.types}" var="tipo" itemLabel="#{tipo.descripcion}" itemValue="#{tipo}"/>  

                </p:selectOneMenu>

                <p:commandButton value="Enviar" style="margin-top: 20px; "     action="#{reg.transition}"
                                 update="matInput,nameInput,apaternoInput,amaternoInput,telInput,emailInput,tipoPrestario,carreraInput"
                                 />

            </h:panelGrid>

        </h:form>
    </h:body>
</html>

